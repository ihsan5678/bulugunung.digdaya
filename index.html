<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="initial-scale=1,user-scalable=no,maximum-scale=1,width=device-width">
        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <link rel="stylesheet" href="css/leaflet.css">
        <link rel="stylesheet" href="css/L.Control.Layers.Tree.css">
        <link rel="stylesheet" href="css/L.Control.Locate.min.css">
        <link rel="stylesheet" href="css/qgis2web.css">
        <link rel="stylesheet" href="css/fontawesome-all.min.css">
        <link rel="stylesheet" href="css/leaflet.photon.css">
        <style>
        html, body, #map {
            width: 100%;
            height: 100%;
            padding: 0;
            margin: 0;
        }
        </style>
        <title>Mewujudkan Masyarakat yang Digdaya</title>
    </head>
    <body>
	  <div style="background-color: #add8e6; color: black; padding; 20px 10px; text-align: center; font-family Arial, sans-serif;" >
		<h2 style="margin: 0;">Bulugunung Multimap: Navigasi Wilayah & Waspada Longsor</h2>
        </div>
		<div id="map">
		<!-- kotak penjelasan pembuat -->
		<div style="
		position: absolute;
		bottom:20px;
		left: 20px;
		background-color: #ffe5b4; /* warna peach */
		color: black;
		border: 2px solid black;
		padding: 15px;
		font-family: Arial, sans-serif;
		font-size: 14px;
		box-shadow: 2px 2px 5px rgba(0,0,0,0.2);
		z-index: 9999;
		">
		<strong>Informasi :</strong><br>
		Desa Bulugunung terletak di Kecamatan Plaosan, Kabupaten Magetan 
		dengan potensi keindahan berupa bentang alam pegunungan. 
		Namun, dibalik potensi tersebut, desa ini memiliki potensi rawan terhadap bencana alam
		seperti longsor dan aktivitas vulkanik seperti gunung meletus.
	<br>
		<strong>Dibuat Oleh :KKN UNS Kelompok 216
			Tahun 2025</strong><br>
		</div>
        </div>
		
    </head>
    <body>
        <div id="map">
        </div>
        <script src="js/qgis2web_expressions.js"></script>
        <script src="js/leaflet.js"></script>
        <script src="js/L.Control.Layers.Tree.min.js"></script>
        <script src="js/L.Control.Locate.min.js"></script>
        <script src="js/multi-style-layer.js"></script>
        <script src="js/leaflet.rotatedMarker.js"></script>
        <script src="js/leaflet.pattern.js"></script>
        <script src="js/leaflet-hash.js"></script>
        <script src="js/Autolinker.min.js"></script>
        <script src="js/rbush.min.js"></script>
        <script src="js/labelgun.min.js"></script>
        <script src="js/labels.js"></script>
        <script src="js/leaflet.photon.js"></script>
        <script src="data/NamaDukuh_2.js"></script>
        <script src="data/KerawananLongsorSangatTinggi_3.js"></script>
        <script src="data/KerawananLongsorTinggi_4.js"></script>
        <script src="data/KerawananLongsorSedang_5.js"></script>
        <script src="data/RumahPerangkatDesa_6.js"></script>
        <script src="data/BalaiDesa_7.js"></script>
        <script src="data/BatasAdministrasi_8.js"></script>
        <script>
        var highlightLayer;
        function highlightFeature(e) {
            highlightLayer = e.target;

            if (e.target.feature.geometry.type === 'LineString' || e.target.feature.geometry.type === 'MultiLineString') {
              highlightLayer.setStyle({
                color: '#ffff00',
              });
            } else {
              highlightLayer.setStyle({
                fillColor: '#ffff00',
                fillOpacity: 1
              });
            }
            highlightLayer.openPopup();
        }
        var map = L.map('map', {
            zoomControl:false, maxZoom:28, minZoom:1
        })
        var hash = new L.Hash(map);
        map.attributionControl.setPrefix('<a href="https://github.com/tomchadwin/qgis2web" target="_blank">qgis2web</a> &middot; <a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a> &middot; <a href="https://qgis.org">QGIS</a>');
        var autolinker = new Autolinker({truncate: {length: 30, location: 'smart'}});
        // remove popup's row if "visible-with-data"
        function removeEmptyRowsFromPopupContent(content, feature) {
         var tempDiv = document.createElement('div');
         tempDiv.innerHTML = content;
         var rows = tempDiv.querySelectorAll('tr');
         for (var i = 0; i < rows.length; i++) {
             var td = rows[i].querySelector('td.visible-with-data');
             var key = td ? td.id : '';
             if (td && td.classList.contains('visible-with-data') && feature.properties[key] == null) {
                 rows[i].parentNode.removeChild(rows[i]);
             }
         }
         return tempDiv.innerHTML;
        }
        // add class to format popup if it contains media
		function addClassToPopupIfMedia(content, popup) {
			var tempDiv = document.createElement('div');
			tempDiv.innerHTML = content;
			if (tempDiv.querySelector('td img')) {
				popup._contentNode.classList.add('media');
					// Delay to force the redraw
					setTimeout(function() {
						popup.update();
					}, 10);
			} else {
				popup._contentNode.classList.remove('media');
			}
		}
        var zoomControl = L.control.zoom({
            position: 'topleft'
        }).addTo(map);
        L.control.locate({locateOptions: {maxZoom: 19}}).addTo(map);
        var bounds_group = new L.featureGroup([]);
        function setBounds() {
            if (bounds_group.getLayers().length) {
                map.fitBounds(bounds_group.getBounds());
            }
        }
        map.createPane('pane_ESRISatellite_0');
        map.getPane('pane_ESRISatellite_0').style.zIndex = 400;
        var layer_ESRISatellite_0 = L.tileLayer('https://mt1.google.com/vt/lyrs=s&x={x}&y={y}&z={z}', {
            pane: 'pane_ESRISatellite_0',
            opacity: 1.0,
            attribution: '',
            minZoom: 1,
            maxZoom: 28,
            minNativeZoom: 0,
            maxNativeZoom: 18
        });
        layer_ESRISatellite_0;
        map.addLayer(layer_ESRISatellite_0);
        map.createPane('pane_OpenStreetMap_1');
        map.getPane('pane_OpenStreetMap_1').style.zIndex = 401;
        var layer_OpenStreetMap_1 = L.tileLayer('http://tile.openstreetmap.org/{z}/{x}/{y}.png', {
            pane: 'pane_OpenStreetMap_1',
            opacity: 1.0,
            attribution: '<a href="https://www.openstreetmap.org/copyright">© OpenStreetMap contributors, CC-BY-SA</a>',
            minZoom: 1,
            maxZoom: 28,
            minNativeZoom: 0,
            maxNativeZoom: 19
        });
        layer_OpenStreetMap_1;
        map.addLayer(layer_OpenStreetMap_1);
        function pop_NamaDukuh_2(feature, layer) {
            layer.on({
                mouseout: function(e) {
                    for (var i in e.target._eventParents) {
                        if (typeof e.target._eventParents[i].resetStyle === 'function') {
                            e.target._eventParents[i].resetStyle(e.target);
                        }
                    }
                    if (typeof layer.closePopup == 'function') {
                        layer.closePopup();
                    } else {
                        layer.eachLayer(function(feature){
                            feature.closePopup()
                        });
                    }
                },
                mouseover: highlightFeature,
            });
            var popupContent = '<table>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Nama_Dukuh'] !== null ? autolinker.link(String(feature.properties['Nama_Dukuh']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                </table>';
            var content = removeEmptyRowsFromPopupContent(popupContent, feature);
			layer.on('popupopen', function(e) {
				addClassToPopupIfMedia(content, e.popup);
			});
			layer.bindPopup(content, { maxHeight: 400 });
        }

        function style_NamaDukuh_2_0() {
            return {
                pane: 'pane_NamaDukuh_2',
                stroke: false, 
                fillOpacity: 0,
                interactive: true,
            }
        }
        map.createPane('pane_NamaDukuh_2');
        map.getPane('pane_NamaDukuh_2').style.zIndex = 402;
        map.getPane('pane_NamaDukuh_2').style['mix-blend-mode'] = 'normal';
        var layer_NamaDukuh_2 = new L.geoJson(json_NamaDukuh_2, {
            attribution: '',
            interactive: true,
            dataVar: 'json_NamaDukuh_2',
            layerName: 'layer_NamaDukuh_2',
            pane: 'pane_NamaDukuh_2',
            onEachFeature: pop_NamaDukuh_2,
            style: style_NamaDukuh_2_0,
        });
        bounds_group.addLayer(layer_NamaDukuh_2);
        map.addLayer(layer_NamaDukuh_2);
        function pop_KerawananLongsorSangatTinggi_3(feature, layer) {
            layer.on({
                mouseout: function(e) {
                    for (var i in e.target._eventParents) {
                        if (typeof e.target._eventParents[i].resetStyle === 'function') {
                            e.target._eventParents[i].resetStyle(e.target);
                        }
                    }
                    if (typeof layer.closePopup == 'function') {
                        layer.closePopup();
                    } else {
                        layer.eachLayer(function(feature){
                            feature.closePopup()
                        });
                    }
                },
                mouseover: highlightFeature,
            });
            var popupContent = '<table>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Kelas_Kera'] !== null ? autolinker.link(String(feature.properties['Kelas_Kera']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                </table>';
            var content = removeEmptyRowsFromPopupContent(popupContent, feature);
			layer.on('popupopen', function(e) {
				addClassToPopupIfMedia(content, e.popup);
			});
			layer.bindPopup(content, { maxHeight: 400 });
        }

        function style_KerawananLongsorSangatTinggi_3_0() {
            return {
                pane: 'pane_KerawananLongsorSangatTinggi_3',
                stroke: false, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(145,8,45,1.0)',
                interactive: true,
            }
        }
        map.createPane('pane_KerawananLongsorSangatTinggi_3');
        map.getPane('pane_KerawananLongsorSangatTinggi_3').style.zIndex = 403;
        map.getPane('pane_KerawananLongsorSangatTinggi_3').style['mix-blend-mode'] = 'normal';
        var layer_KerawananLongsorSangatTinggi_3 = new L.geoJson(json_KerawananLongsorSangatTinggi_3, {
            attribution: '',
            interactive: true,
            dataVar: 'json_KerawananLongsorSangatTinggi_3',
            layerName: 'layer_KerawananLongsorSangatTinggi_3',
            pane: 'pane_KerawananLongsorSangatTinggi_3',
            onEachFeature: pop_KerawananLongsorSangatTinggi_3,
            style: style_KerawananLongsorSangatTinggi_3_0,
        });
        bounds_group.addLayer(layer_KerawananLongsorSangatTinggi_3);
        map.addLayer(layer_KerawananLongsorSangatTinggi_3);
        function pop_KerawananLongsorTinggi_4(feature, layer) {
            layer.on({
                mouseout: function(e) {
                    for (var i in e.target._eventParents) {
                        if (typeof e.target._eventParents[i].resetStyle === 'function') {
                            e.target._eventParents[i].resetStyle(e.target);
                        }
                    }
                    if (typeof layer.closePopup == 'function') {
                        layer.closePopup();
                    } else {
                        layer.eachLayer(function(feature){
                            feature.closePopup()
                        });
                    }
                },
                mouseover: highlightFeature,
            });
            var popupContent = '<table>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Kelas_Kera'] !== null ? autolinker.link(String(feature.properties['Kelas_Kera']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                </table>';
            var content = removeEmptyRowsFromPopupContent(popupContent, feature);
			layer.on('popupopen', function(e) {
				addClassToPopupIfMedia(content, e.popup);
			});
			layer.bindPopup(content, { maxHeight: 400 });
        }

        function style_KerawananLongsorTinggi_4_0() {
            return {
                pane: 'pane_KerawananLongsorTinggi_4',
                stroke: false, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(178,20,23,1.0)',
                interactive: true,
            }
        }
        map.createPane('pane_KerawananLongsorTinggi_4');
        map.getPane('pane_KerawananLongsorTinggi_4').style.zIndex = 404;
        map.getPane('pane_KerawananLongsorTinggi_4').style['mix-blend-mode'] = 'normal';
        var layer_KerawananLongsorTinggi_4 = new L.geoJson(json_KerawananLongsorTinggi_4, {
            attribution: '',
            interactive: true,
            dataVar: 'json_KerawananLongsorTinggi_4',
            layerName: 'layer_KerawananLongsorTinggi_4',
            pane: 'pane_KerawananLongsorTinggi_4',
            onEachFeature: pop_KerawananLongsorTinggi_4,
            style: style_KerawananLongsorTinggi_4_0,
        });
        bounds_group.addLayer(layer_KerawananLongsorTinggi_4);
        map.addLayer(layer_KerawananLongsorTinggi_4);
        function pop_KerawananLongsorSedang_5(feature, layer) {
            layer.on({
                mouseout: function(e) {
                    for (var i in e.target._eventParents) {
                        if (typeof e.target._eventParents[i].resetStyle === 'function') {
                            e.target._eventParents[i].resetStyle(e.target);
                        }
                    }
                    if (typeof layer.closePopup == 'function') {
                        layer.closePopup();
                    } else {
                        layer.eachLayer(function(feature){
                            feature.closePopup()
                        });
                    }
                },
                mouseover: highlightFeature,
            });
            var popupContent = '<table>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Kelas_Kera'] !== null ? autolinker.link(String(feature.properties['Kelas_Kera']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                </table>';
            var content = removeEmptyRowsFromPopupContent(popupContent, feature);
			layer.on('popupopen', function(e) {
				addClassToPopupIfMedia(content, e.popup);
			});
			layer.bindPopup(content, { maxHeight: 400 });
        }

        function style_KerawananLongsorSedang_5_0() {
            return {
                pane: 'pane_KerawananLongsorSedang_5',
                stroke: false, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(255,29,33,1.0)',
                interactive: true,
            }
        }
        map.createPane('pane_KerawananLongsorSedang_5');
        map.getPane('pane_KerawananLongsorSedang_5').style.zIndex = 405;
        map.getPane('pane_KerawananLongsorSedang_5').style['mix-blend-mode'] = 'normal';
        var layer_KerawananLongsorSedang_5 = new L.geoJson(json_KerawananLongsorSedang_5, {
            attribution: '',
            interactive: true,
            dataVar: 'json_KerawananLongsorSedang_5',
            layerName: 'layer_KerawananLongsorSedang_5',
            pane: 'pane_KerawananLongsorSedang_5',
            onEachFeature: pop_KerawananLongsorSedang_5,
            style: style_KerawananLongsorSedang_5_0,
        });
        bounds_group.addLayer(layer_KerawananLongsorSedang_5);
        map.addLayer(layer_KerawananLongsorSedang_5);
        function pop_RumahPerangkatDesa_6(feature, layer) {
            layer.on({
                mouseout: function(e) {
                    for (var i in e.target._eventParents) {
                        if (typeof e.target._eventParents[i].resetStyle === 'function') {
                            e.target._eventParents[i].resetStyle(e.target);
                        }
                    }
                    if (typeof layer.closePopup == 'function') {
                        layer.closePopup();
                    } else {
                        layer.eachLayer(function(feature){
                            feature.closePopup()
                        });
                    }
                },
                mouseover: highlightFeature,
            });
            var popupContent = '<table>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Nama Peran'] !== null ? autolinker.link(String(feature.properties['Nama Peran']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Jabatan'] !== null ? autolinker.link(String(feature.properties['Jabatan']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Foto'] !== null ? '<img src="images/' + String(feature.properties['Foto']).replace(/[\\/:]/g, '_').trim().replace(/'/g, '\'').replace(/"/g, '&quot;') + '">' : '') + '</td>\
                    </tr>\
                </table>';
            var content = removeEmptyRowsFromPopupContent(popupContent, feature);
			layer.on('popupopen', function(e) {
				addClassToPopupIfMedia(content, e.popup);
			});
			layer.bindPopup(content, { maxHeight: 400 });
        }

        function style_RumahPerangkatDesa_6_0() {
            return {
                pane: 'pane_RumahPerangkatDesa_6',
                radius: 6.4,
                opacity: 1,
                color: 'rgba(0,0,0,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0,
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(255,255,255,1.0)',
                interactive: true,
            }
        }
        function style_RumahPerangkatDesa_6_1() {
            return {
                pane: 'pane_RumahPerangkatDesa_6',
                radius: 1.4,
                opacity: 1,
                color: 'rgba(0,0,0,1.0)',
                dashArray: '',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 2.0,
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(0,0,0,1.0)',
                interactive: true,
            }
        }
        map.createPane('pane_RumahPerangkatDesa_6');
        map.getPane('pane_RumahPerangkatDesa_6').style.zIndex = 406;
        map.getPane('pane_RumahPerangkatDesa_6').style['mix-blend-mode'] = 'normal';
        var layer_RumahPerangkatDesa_6 = new L.geoJson.multiStyle(json_RumahPerangkatDesa_6, {
            attribution: '',
            interactive: true,
            dataVar: 'json_RumahPerangkatDesa_6',
            layerName: 'layer_RumahPerangkatDesa_6',
            pane: 'pane_RumahPerangkatDesa_6',
            onEachFeature: pop_RumahPerangkatDesa_6,
            pointToLayers: [function (feature, latlng) {
                var context = {
                    feature: feature,
                    variables: {}
                };
                return L.circleMarker(latlng, style_RumahPerangkatDesa_6_0(feature));
            },function (feature, latlng) {
                var context = {
                    feature: feature,
                    variables: {}
                };
                return L.circleMarker(latlng, style_RumahPerangkatDesa_6_1(feature));
            },
        ]});
        bounds_group.addLayer(layer_RumahPerangkatDesa_6);
        map.addLayer(layer_RumahPerangkatDesa_6);
        function pop_BalaiDesa_7(feature, layer) {
            layer.on({
                mouseout: function(e) {
                    for (var i in e.target._eventParents) {
                        if (typeof e.target._eventParents[i].resetStyle === 'function') {
                            e.target._eventParents[i].resetStyle(e.target);
                        }
                    }
                    if (typeof layer.closePopup == 'function') {
                        layer.closePopup();
                    } else {
                        layer.eachLayer(function(feature){
                            feature.closePopup()
                        });
                    }
                },
                mouseover: highlightFeature,
            });
            var popupContent = '<table>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Kantor'] !== null ? autolinker.link(String(feature.properties['Kantor']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Foto'] !== null ? '<img src="images/' + String(feature.properties['Foto']).replace(/[\\/:]/g, '_').trim().replace(/'/g, '\'').replace(/"/g, '&quot;') + '">' : '') + '</td>\
                    </tr>\
                </table>';
            var content = removeEmptyRowsFromPopupContent(popupContent, feature);
			layer.on('popupopen', function(e) {
				addClassToPopupIfMedia(content, e.popup);
			});
			layer.bindPopup(content, { maxHeight: 400 });
        }

        function style_BalaiDesa_7_0() {
            return {
                pane: 'pane_BalaiDesa_7',
        rotationAngle: 0.0,
        rotationOrigin: 'center center',
        icon: L.icon({
            iconUrl: 'markers/BalaiDesa_7.svg',
            iconSize: [30.4, 30.4]
        }),
                interactive: true,
            }
        }
        map.createPane('pane_BalaiDesa_7');
        map.getPane('pane_BalaiDesa_7').style.zIndex = 407;
        map.getPane('pane_BalaiDesa_7').style['mix-blend-mode'] = 'normal';
        var layer_BalaiDesa_7 = new L.geoJson(json_BalaiDesa_7, {
            attribution: '',
            interactive: true,
            dataVar: 'json_BalaiDesa_7',
            layerName: 'layer_BalaiDesa_7',
            pane: 'pane_BalaiDesa_7',
            onEachFeature: pop_BalaiDesa_7,
            pointToLayer: function (feature, latlng) {
                var context = {
                    feature: feature,
                    variables: {}
                };
                return L.marker(latlng, style_BalaiDesa_7_0(feature));
            },
        });
        bounds_group.addLayer(layer_BalaiDesa_7);
        map.addLayer(layer_BalaiDesa_7);
        function pop_BatasAdministrasi_8(feature, layer) {
            layer.on({
                mouseout: function(e) {
                    for (var i in e.target._eventParents) {
                        if (typeof e.target._eventParents[i].resetStyle === 'function') {
                            e.target._eventParents[i].resetStyle(e.target);
                        }
                    }
                    if (typeof layer.closePopup == 'function') {
                        layer.closePopup();
                    } else {
                        layer.eachLayer(function(feature){
                            feature.closePopup()
                        });
                    }
                },
                mouseover: highlightFeature,
            });
            var popupContent = '<table>\
                    <tr>\
                        <td colspan="2">' + (feature.properties['Batas'] !== null ? autolinker.link(String(feature.properties['Batas']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                </table>';
            var content = removeEmptyRowsFromPopupContent(popupContent, feature);
			layer.on('popupopen', function(e) {
				addClassToPopupIfMedia(content, e.popup);
			});
			layer.bindPopup(content, { maxHeight: 400 });
        }

        function style_BatasAdministrasi_8_0(feature) {
            switch(String(feature.properties['Batas'])) {
                case 'Batas Desa':
                    return {
                pane: 'pane_BatasAdministrasi_8',
                opacity: 1,
                color: 'rgba(227,26,28,1.0)',
                dashArray: '16.0,8.0',
                lineCap: 'square',
                lineJoin: 'bevel',
                weight: 4.0,
                fillOpacity: 0,
                interactive: false,
            }
                    break;
                case 'Batas Dukuh':
                    return {
                pane: 'pane_BatasAdministrasi_8',
                opacity: 1,
                color: 'rgba(255,127,0,1.0)',
                dashArray: '2.0,4.0',
                lineCap: 'square',
                lineJoin: 'bevel',
                weight: 2.0,
                fillOpacity: 0,
                interactive: false,
            }
                    break;
            }
        }
        function style_BatasAdministrasi_8_1(feature) {
            switch(String(feature.properties['Batas'])) {
                case 'Batas Desa':
                    return {
                pane: 'pane_BatasAdministrasi_8',
                opacity: 1,
                color: 'rgba(227,26,28,1.0)',
                dashArray: '4.0,8.0',
                lineCap: 'square',
                lineJoin: 'bevel',
                weight: 4.0,
                fillOpacity: 0,
                interactive: false,
            }
                    break;
                case 'Batas Dukuh':
                    return {
                pane: 'pane_BatasAdministrasi_8',
                opacity: 1,
                color: 'rgba(255,127,0,1.0)',
                dashArray: '8.0,4.0',
                lineCap: 'square',
                lineJoin: 'bevel',
                weight: 2.0,
                fillOpacity: 0,
                interactive: false,
            }
                    break;
            }
        }
        map.createPane('pane_BatasAdministrasi_8');
        map.getPane('pane_BatasAdministrasi_8').style.zIndex = 408;
        map.getPane('pane_BatasAdministrasi_8').style['mix-blend-mode'] = 'normal';
        var layer_BatasAdministrasi_8 = new L.geoJson.multiStyle(json_BatasAdministrasi_8, {
            attribution: '',
            interactive: false,
            dataVar: 'json_BatasAdministrasi_8',
            layerName: 'layer_BatasAdministrasi_8',
            pane: 'pane_BatasAdministrasi_8',
            onEachFeature: pop_BatasAdministrasi_8,
            styles: [style_BatasAdministrasi_8_0,style_BatasAdministrasi_8_1,]
        });
        bounds_group.addLayer(layer_BatasAdministrasi_8);
        map.addLayer(layer_BatasAdministrasi_8);
        const url = {"Nominatim": "https://nominatim.openstreetmap.org/search?format=geojson&addressdetails=1&",
        "BAN": "https://api-adresse.data.gouv.fr/search/?"}
        var photonControl = L.control.photon({
            url: url["Nominatim"],
            feedbackLabel: '',
            position: 'topleft',
            includePosition: true,
            initial: true,
            // resultsHandler: myHandler,
        }).addTo(map);
        photonControl._container.childNodes[0].style.borderRadius="10px"
        // Create a variable to store the geoJSON data
        var x = null;
        // Create a variable to store the marker
        var marker = null;
        // Add an event listener to the Photon control to create a marker from the returned geoJSON data
        var z = null;
        photonControl.on('selected', function(e) {
            console.log(photonControl.search.resultsContainer);
            if (x != null) {
                map.removeLayer(obj3.marker);
                map.removeLayer(x);
            }
            obj2.gcd = e.choice;
            x = L.geoJSON(obj2.gcd).addTo(map);
            var label = typeof obj2.gcd.properties.label === 'undefined' ? obj2.gcd.properties.display_name : obj2.gcd.properties.label;
            obj3.marker = L.marker(x.getLayers()[0].getLatLng()).bindPopup(label).addTo(map);
            map.setView(x.getLayers()[0].getLatLng(), 17);
            z = typeof e.choice.properties.label === 'undefined'? e.choice.properties.display_name : e.choice.properties.label;
            console.log(e);
            e.target.input.value = z;
        });
        var search = document.getElementsByClassName("leaflet-photon leaflet-control")[0];
        search.classList.add("leaflet-control-search")
        search.style.display = "flex";
        search.style.backgroundColor="rgba(255,255,255,0.5)" 

        // Créer le nouvel élément bouton
        var button = document.createElement("div");
        button.id = "gcd-button-control";
        button.className = "gcd-gl-btn fa fa-search search-button";

        // Ajouter le bouton à l'élément parent
        search.insertBefore(button, search.firstChild);
        last = search.lastChild;
        last.style.display = "none";
        button.addEventListener("click", function (e) {
            if (last.style.display === "none") {
                last.style.display = "block";
            } else {
                last.style.display = "none";
            }
        });
        var overlaysTree = [
            {label: 'Batas Administrasi<br /><table><tr><td style="text-align: center;"><img src="legend/BatasAdministrasi_8_BatasDesa0.png" /></td><td>Batas Desa</td></tr><tr><td style="text-align: center;"><img src="legend/BatasAdministrasi_8_BatasDukuh1.png" /></td><td>Batas Dukuh</td></tr></table>', layer: layer_BatasAdministrasi_8},
            {label: '<img src="legend/BalaiDesa_7.png" /> Balai Desa', layer: layer_BalaiDesa_7},
            {label: '<img src="legend/RumahPerangkatDesa_6.png" /> Rumah Perangkat Desa', layer: layer_RumahPerangkatDesa_6},
            {label: '<img src="legend/KerawananLongsorSedang_5.png" /> Kerawanan Longsor (Sedang)', layer: layer_KerawananLongsorSedang_5},
            {label: '<img src="legend/KerawananLongsorTinggi_4.png" /> Kerawanan Longsor (Tinggi)', layer: layer_KerawananLongsorTinggi_4},
            {label: '<img src="legend/KerawananLongsorSangatTinggi_3.png" /> Kerawanan Longsor (Sangat Tinggi)', layer: layer_KerawananLongsorSangatTinggi_3},
            {label: '<img src="legend/NamaDukuh_2.png" /> Nama Dukuh', layer: layer_NamaDukuh_2},
            {label: "OpenStreetMap", layer: layer_OpenStreetMap_1, radioGroup: 'bm' },
            {label: "ESRI Satellite", layer: layer_ESRISatellite_0, radioGroup: 'bm' },]
        var lay = L.control.layers.tree(null, overlaysTree,{
            //namedToggle: true,
            //selectorBack: false,
            //closedSymbol: '&#8862; &#x1f5c0;',
            //openedSymbol: '&#8863; &#x1f5c1;',
            //collapseAll: 'Collapse all',
            //expandAll: 'Expand all',
            collapsed: true,
        });
        lay.addTo(map);
        setBounds();
        var i = 0;
        layer_NamaDukuh_2.eachLayer(function(layer) {
            var context = {
                feature: layer.feature,
                variables: {}
            };
            layer.bindTooltip((layer.feature.properties['Nama_Dukuh'] !== null?String('<div style="color: #323232; font-size: 10pt; font-weight: bold; font-family: \'Times New Roman\', sans-serif;">' + layer.feature.properties['Nama_Dukuh']) + '</div>':''), {permanent: true, offset: [-0, -16], className: 'css_NamaDukuh_2'});
            labels.push(layer);
            totalMarkers += 1;
              layer.added = true;
              addLabel(layer, i);
              i++;
        });
        resetLabels([layer_NamaDukuh_2]);
        map.on("zoomend", function(){
            resetLabels([layer_NamaDukuh_2]);
        });
        map.on("layeradd", function(){
            resetLabels([layer_NamaDukuh_2]);
        });
        map.on("layerremove", function(){
            resetLabels([layer_NamaDukuh_2]);
        });
        </script>
    </body>
</html>
